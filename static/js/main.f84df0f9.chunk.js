(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,n){e.exports={DropZone:"DropZone_DropZone__2aEus",Dropzone:"DropZone_Dropzone__2sLPb"}},50:function(e,t,n){e.exports={App:"App_App__tzqGW"}},53:function(e,t,n){e.exports={Main:"Main_Main__22WzM"}},56:function(e,t,n){e.exports={Preloader:"Preloader_Preloader__PcQp7"}},58:function(e,t,n){e.exports=n(78)},78:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),i=n(42),r=n.n(i),c=n(26),s=n(81),l=n(15),u=n(11),d=n(7),f=n(45),b=n(46),h=n(47),p=n(48),O=n.n(p),j=n(49),v=Object(u.d)(j.createHistory)({basename:"/file.stream.app"}),w=n(38),y={showPreloader:!1},m=Object(d.combineReducers)({routing:l.routerReducer,preloader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_PRELOADER_TYPE":case"FINISH_PRELOADER_TYPE":return Object(w.a)({},e,{showPreloader:t.payload});default:return e}}}),E=function(){var e=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),t=Object(h.createLogger)(),n=Object(l.routerMiddleware)(v),a=Object(d.createStore)(m,e,Object(f.composeWithDevTools)(Object(d.applyMiddleware)(b.a,t,n)));return a.subscribe(O()(function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){}}({})},1e3)),a},g=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var _=n(50),k=n.n(_),S=function(e){var t=e.children;return o.a.createElement("div",{id:"App",className:k.a.App},t)},A=n(8),R=n(9),T=n(27),D=n(24),z=n(28),C=n(2),F=n(5),I=n(51),L=n.n(I),x={AS_BINARY_STRING:"readAsBinaryString",AS_TEXT:"readAsText",AS_DATA_URL:"readAsDataURL",AS_ARRAY_BUFFER:"readAsArrayBuffer"},N=function(){function e(t){Object(A.a)(this,e),Object.defineProperty(this,W,{writable:!0,value:void 0}),Object.defineProperty(this,Y,{writable:!0,value:void 0}),Object(C.a)(this,W)[W]=t}return Object(R.a)(e,[{key:"readAsync",value:function(e,t,n,a){if(!Object(C.a)(this,W)[W])throw new M("Chunk size should exists and not be equals to zero!");if(!e)throw new M("File should exists!");if(!t)throw new M("Type of reading should exists!");if(!Object.values(x).includes(t))throw new M("Incorrect type of reading!");e.size<Object(C.a)(this,W)[W]&&(Object(C.a)(this,W)[W]=e.size);var o=Object(C.a)(this,W)[W],i=Object(C.a)(this,W)[W];new H(0,o,i,t).read(e,n,a)}},{key:"readAsyncPromise",value:function(e,t,n,a){var o={chunkSize:Object(C.a)(this,W)[W],file:e,typeOfReading:t,onLoadFileCallback:n,onLoadChunkCallback:a},i=new X;return i.validate(o).then(function(e){return i.read(e)})}},{key:"writeAsync",value:function(e,t,n){if(!e)throw new M("File should exists!");if(!t)throw new M("Chunk should exists!");Object(C.a)(this,Y)[Y]||(Object(C.a)(this,Y)[Y]=new Q(e)),Object(C.a)(this,Y)[Y].write(t,n)}},{key:"close",value:function(e){Object(C.a)(this,Y)[Y]&&Object(C.a)(this,Y)[Y].close(e)}}]),e}(),W=Object(F.a)("chunkSize"),Y=Object(F.a)("fileStreamWriterAsync"),M=function(){function e(t){Object(A.a)(this,e),Object.defineProperty(this,B,{writable:!0,value:void 0}),Object(C.a)(this,B)[B]=t}return Object(R.a)(e,[{key:"message",get:function(){return Object(C.a)(this,B)[B]}}]),e}(),B=Object(F.a)("message"),H=function(){function e(t,n,a,o){Object(A.a)(this,e),Object.defineProperty(this,U,{writable:!0,value:void 0}),Object.defineProperty(this,Z,{writable:!0,value:void 0}),Object.defineProperty(this,G,{writable:!0,value:void 0}),Object.defineProperty(this,q,{writable:!0,value:void 0}),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object(C.a)(this,U)[U]=t,Object(C.a)(this,Z)[Z]=n,Object(C.a)(this,G)[G]=a,Object(C.a)(this,q)[q]=o,Object(C.a)(this,J)[J]=new FileReader}return Object(R.a)(e,[{key:"read",value:function(e,t,n){var a=this;Object(C.a)(this,J)[J].onloadend=function(o){Object(C.a)(a,U)[U]>=e.size?t&&t(e):(n&&n(e,o),Object(C.a)(a,U)[U]+=Object(C.a)(a,G)[G],Object(C.a)(a,Z)[Z]+=Object(C.a)(a,G)[G],a.read(e,t,n))},Object(C.a)(this,J)[J][Object(C.a)(this,q)[q]](e.slice(Object(C.a)(this,U)[U],Object(C.a)(this,Z)[Z]))}}]),e}(),U=Object(F.a)("start"),Z=Object(F.a)("stop"),G=Object(F.a)("step"),q=Object(F.a)("typeOfReading"),J=Object(F.a)("fileReader"),X=function(){function e(){Object(A.a)(this,e),this.validate=function(e){return new Promise(function(t,n){e.chunkSize||n("Chunk size should exists and not be equals to zero!"),e.file||n("Chunk size should exists and not be equals to zero!"),e.typeOfReading||n("Type of reading should exists!"),Object.values(x).includes(e.typeOfReading)||n("Incorrect type of reading!"),e.file.size<e.chunkSize&&(e.chunkSize=e.file.size),e.start=0,e.stop=e.chunkSize,e.step=e.chunkSize,t(e)})}}return Object(R.a)(e,[{key:"read",value:function(e){var t=new FileReader;return new Promise(function n(a,o){t.onloadend=function(t){e.onLoadChunkCallback&&e.onLoadChunkCallback(e.file,t),e.start+=e.step,e.stop+=e.step,e.start>=e.file.size?(e.onLoadFileCallback&&e.onLoadFileCallback(e.file),a(e.file)):n(a,o)},t[e.typeOfReading](e.file.slice(e.start,e.stop))})}}]),e}(),Q=function(){function e(t){var n=this;Object(A.a)(this,e),Object.defineProperty(this,$,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,V,{writable:!0,value:void 0}),Object.defineProperty(this,ee,{writable:!0,value:function(){Object(C.a)(n,K)[K].abort()}}),Object(C.a)(this,$)[$]=t;var a=L.a.createWriteStream(Object(C.a)(this,$)[$].name);Object(C.a)(this,K)[K]=a.getWriter(),Object(C.a)(this,V)[V]=TextEncoder.prototype.encode.bind(new TextEncoder),window.isSecureContext&&window.addEventListener("beforeunload",Object(C.a)(this,ee)[ee])}return Object(R.a)(e,[{key:"write",value:function(e,t){var n=Object(C.a)(this,V)[V](e.target.result);n&&Object(C.a)(this,K)[K].write(n),t&&t(Object(C.a)(this,$)[$],n)}},{key:"close",value:function(e){Object(C.a)(this,K)[K]&&Object(C.a)(this,K)[K].close(),window.removeEventListener("beforeunload",Object(C.a)(this,ee)[ee]),e&&e(Object(C.a)(this,$)[$])}}]),e}(),$=Object(F.a)("file"),K=Object(F.a)("writer"),V=Object(F.a)("encode"),ee=Object(F.a)("onExitPage"),te=function(e,t){return function(n){n({type:"START_PRELOADER_TYPE",payload:!0}),e.sort(function(e,t){return e.size-t.size}),n(ne({acceptedFiles:e,rejectedFiles:t}));try{e.forEach(function(t,a){var o=new N(10485760);o.readAsync(t,x.AS_TEXT,function(t){n(ae(t)),o.close(function(t){n(oe(t)),a===e.length-1&&(n(ie()),n({type:"FINISH_PRELOADER_TYPE",payload:!1}))})},function(e,t){console.log("File is loading:",e.name,"Loaded chunk size:",t.loaded,"bytes"),o.writeAsync(e,t,function(e,t){return console.log("File is writing:",e.name)})})})}catch(a){n(ie()),n(re(a.message)),n({type:"FINISH_PRELOADER_TYPE",payload:!1})}}},ne=function(e){return{type:"START_FILES_PROCESSING_TYPE",payload:e}},ae=function(e){return{type:"FILE_IS_LOADED_TYPE",payload:e}},oe=function(e){return{type:"FILE_IS_WRITTEN_TYPE",payload:e}},ie=function(){return{type:"FINISH_FILES_PROCESSING_TYPE"}},re=function(e){return{type:"FILES_PROCESSING_ERROR_TYPE",payload:e}},ce=n(23),se=n(57),le=n(37),ue=n.n(le),de=function(e){function t(e,n){var a;return Object(A.a)(this,t),(a=Object(T.a)(this,Object(D.a)(t).call(this,e,n))).handleOnDrop=a.handleOnDrop.bind(Object(ce.a)(a)),a}return Object(z.a)(t,e),Object(R.a)(t,[{key:"handleOnDrop",value:function(e,t){(0,this.props.onDropFiles)(e,t)}},{key:"render",value:function(){return o.a.createElement("div",{id:"DropZone",className:ue.a.DropZone},o.a.createElement(se.a,{onDrop:this.handleOnDrop,className:ue.a.Dropzone},"Drop file's here"))}}]),t}(a.Component),fe=n(53),be=n.n(fe),he=function(e){var t=e.onDropFiles;return o.a.createElement("div",{id:"Main",className:be.a.Main},o.a.createElement(de,{onDropFiles:t}))},pe=n(54),Oe=n(56),je=n.n(Oe),ve=function(e){var t=e.size,n=e.colors;return o.a.createElement("div",{id:"Preloader",className:je.a.Preloader},o.a.createElement(pe.a,{size:t,color1:n[0],color2:n[1],color3:n[2],color4:n[3]}))},we=["#aaffaa","#008800","#ffaa00","#ff0000"],ye=function(e){function t(){return Object(A.a)(this,t),Object(T.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(R.a)(t,[{key:"getMainComponent",value:function(){var e=this.props.onDropFiles;return o.a.createElement(he,{onDropFiles:e})}},{key:"getPreloaderComponent",value:function(){if(this.props.preloader.showPreloader)return o.a.createElement(ve,{size:48,colors:we})}},{key:"render",value:function(){return o.a.createElement("div",{id:"MainContainer"},this.getMainComponent(),this.getPreloaderComponent())}}]),t}(a.Component);var me=Object(c.b)(function(e){return{preloader:e.preloader}},function(e){return Object(d.bindActionCreators)({onDropFiles:te},e)})(ye),Ee=o.a.createElement("div",null,o.a.createElement(u.b,{path:"/",component:S},o.a.createElement(u.a,{to:"/main"}),o.a.createElement(u.b,{path:"/main",component:me}),o.a.createElement(u.b,{path:"*",component:me}))),ge=E(),Pe=Object(l.syncHistoryWithStore)(v,ge);!function(e){if("serviceWorker"in navigator){if(new URL("/file.stream.app",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/file.stream.app","/service-worker.js");g?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):P(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):P(t,e)})}}();var _e=o.a.createElement(c.a,{store:ge},o.a.createElement(s.a,null,o.a.createElement(u.c,{history:Pe},Ee)));r.a.render(_e,document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.f84df0f9.chunk.js.map